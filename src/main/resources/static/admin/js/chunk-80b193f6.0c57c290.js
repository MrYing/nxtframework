(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80b193f6"],{4464:function(t,e,a){"use strict";a("a9ee")},a9ee:function(t,e,a){},e6e2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("添加商品")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.thirdParty}},[t._v("从第三方平台抓取产品")]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.categoryId,callback:function(e){t.$set(t.params,"categoryId",e)},expression:"params.categoryId"}},[a("el-option",{attrs:{value:null,label:"分类：全部"}}),t._v(" "),t._l(t.category_list,(function(t){return a("el-option",{key:t.category_id,attrs:{label:t.category_name_display,value:t.category_id}})}))],2),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.params.isSelling,callback:function(e){t.$set(t.params,"isSelling",e)},expression:"params.isSelling"}},[a("el-option",{attrs:{value:null,label:"上下架：全部"}}),t._v(" "),a("el-option",{attrs:{value:!0,label:"上架"}}),t._v(" "),a("el-option",{attrs:{value:!1,label:"下架"}})],1),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.params.isRecommend,callback:function(e){t.$set(t.params,"isRecommend",e)},expression:"params.isRecommend"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.params.isNew,callback:function(e){t.$set(t.params,"isNew",e)},expression:"params.isNew"}},[a("el-option",{attrs:{value:null,label:"新品：全部"}}),t._v(" "),t._l(t.isOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:"新品："+t.label,value:t.value}})}))],2),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:t.params.isHot,callback:function(e){t.$set(t.params,"isHot",e)},expression:"params.isHot"}},[a("el-option",{attrs:{value:null,label:"热卖：全部"}}),t._v(" "),t._l(t.isOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:"热卖："+t.label,value:t.value}})}))],2),t._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"搜索关键词"},model:{value:t.params.searchKeyword,callback:function(e){t.$set(t.params,"searchKeyword",e)},expression:"params.searchKeyword"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.change}},[t._v("筛选")])],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"10px"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.listData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"货品信息",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.pic_url+"?imageView2/1/w/50/h/50/q/75"}}),t._v(" "),a("div",{staticStyle:{padding:"5px"}},[t._v("\n              "+t._s(e.row.productName)+"\n              "),a("br"),t._v("\n              货号："+t._s(e.row.itemNo)+"\n              "),a("br"),t._v("\n              分类："+t._s(e.row.categoryName)+"\n            ")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"priceMarket",label:"原价","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"priceSelling",label:"现价","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"inventoryQuantity",label:"库存","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"salsCount",label:"销量","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"salsCount",label:"佣金比例(%)",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{staticClass:"inputClass",attrs:{"controls-position":"right",min:1,max:100},on:{change:function(a){t.handleChange&&t.handleRow(e.row)}},model:{value:e.row.commissionRate,callback:function(a){t.$set(e.row,"commissionRate",a)},expression:"scope.row.commissionRate"}}),t._v(" "),e.row.isShow?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("更新")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"datelineUpdatedReadable",label:"上次修改时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"标签",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          上架\n          "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changeIsSelling(e.$index,e.row)}},model:{value:e.row.isSelling,callback:function(a){t.$set(e.row,"isSelling",a)},expression:"scope.row.isSelling"}}),t._v(" 新品\n          "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changeIsNew(e.$index,e.row)}},model:{value:e.row.isNew,callback:function(a){t.$set(e.row,"isNew",a)},expression:"scope.row.isNew"}}),t._v(" "),a("br"),t._v("\n          推荐\n          "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changeRecommend(e.$index,e.row)}},model:{value:e.row.isRecommend,callback:function(a){t.$set(e.row,"isRecommend",a)},expression:"scope.row.isRecommend"}}),t._v("\n          热卖\n          "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.changeIsHot(e.$index,e.row)}},model:{value:e.row.isHot,callback:function(a){t.$set(e.row,"isHot",a)},expression:"scope.row.isHot"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"right",width:"80",label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-col",[a("i",{staticClass:"el-icon-bottom",on:{click:function(a){return t.handleSort(e.$index,e.row,"bot")}}}),t._v(" "),a("i",{staticClass:"el-icon-top",on:{click:function(a){return t.handleSort(e.$index,e.row,"top")}}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑 ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleView(e.$index,e.row)}}},[t._v("查看 ")])]}}])})],1)],1),t._v(" "),a("el-row",{staticClass:"row-bg",staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.handleDelete}},[t._v("放入回收站")])],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:function(e){return t.handlePage(-1)}}},[t._v("上一页")]),t._v(" "),a("el-button",[t._v(t._s(t.listNumber)+"/"+t._s(Math.ceil(t.pageCount/t.params.limit)))]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-right"},on:{click:function(e){return t.handlePage(1)}}},[t._v("下一页")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"从第三方平台抓取",visible:t.thirdPartyDialog,"close-on-click-modal":!1,"show-close":!1,"close-on-press-escape":!1,width:"600px",left:""},on:{"update:visible":function(e){t.thirdPartyDialog=e}}},[a("el-form",{ref:"thirdPartyRef",attrs:{model:t.thirdPartyParam,rules:t.thirdPartyParamRules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"链接",prop:"externalUrl"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"支持Shopify、Amazon、淘宝、天猫、京东、1688、并且不断扩展中。。。"},model:{value:t.thirdPartyParam.externalUrl,callback:function(e){t.$set(t.thirdPartyParam,"externalUrl",e)},expression:"thirdPartyParam.externalUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品类别",prop:"categoryId"}},[a("el-select",{attrs:{placeholder:"--请选择--"},model:{value:t.thirdPartyParam.categoryId,callback:function(e){t.$set(t.thirdPartyParam,"categoryId",e)},expression:"thirdPartyParam.categoryId"}},t._l(t.$store.state.product.CategoryListData,(function(t){return a("el-option",{key:t.category_id,attrs:{label:t.category_name_display,value:t.category_id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"运费模板",prop:"deliveryConfigId"}},[a("el-select",{attrs:{placeholder:"--请选择--"},model:{value:t.thirdPartyParam.deliveryConfigId,callback:function(e){t.$set(t.thirdPartyParam,"deliveryConfigId",e)},expression:"thirdPartyParam.deliveryConfigId"}},t._l(t.$store.state.delivery.deliveryConfigList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:function(e){t.thirdPartyDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveThirdParty}},[t._v("抓取并创建")])],1)],1)],1)},r=[],l=(a("96cf"),a("3b8d")),n=(a("ac6a"),a("db72")),o=a("5c96"),s=a("2f62"),c=a("c4c8"),u={data:function(){var t=function(t,e,a){null==e||0===e.length?a(new Error("链接不能为空")):a()},e=function(t,e,a){null==e||0===e.length?a(new Error("产品类别不能为空")):a()},a=function(t,e,a){null==e||0===e.length?a(new Error("运费模板不能为空")):a()};return{multipleSelection:[],options:[{value:null,label:"是否推荐：全部"},{value:!0,label:"仅含推荐"},{value:!1,label:"仅不推荐"}],isOptions:[{value:!0,label:"是"},{value:!1,label:"否"}],params:{categoryId:null,isRecommend:null,searchKeyword:"",isSelling:null,isNew:null,isHot:null,offset:0,limit:20,requireCount:!0,isTrash:!1},newParams:{isTrash:!1,offset:0,limit:20},thirdPartyDialog:!1,thirdPartyParam:{},thirdPartyParamRules:{externalUrl:[{required:!0,trigger:"blur",validator:t}],categoryId:[{required:!0,trigger:"change",validator:e}],deliveryConfigId:[{required:!0,trigger:"change",validator:a}]}}},computed:Object(n["a"])({listData:function(){return this.$store.state.product.ListData},listNumber:function(){return this.$store.state.product.ListNumber}},Object(s["c"])({category_list:function(t){return t.product.CategoryListData},pageCount:function(t){return t.product.pageCount}})),created:function(){this.load(),this.$store.dispatch("product/getCategory"),this.$store.dispatch("delivery/getDeliveryConfigList")},watch:{},methods:{load:function(){this.$store.commit("product/SET_LIST_NUMBER",1),this.$store.dispatch("product/getList",this.newParams)},change:function(){this.$myLoading.myLoading.loading(),this.newParams=Object.assign({},this.params),this.$store.commit("product/SET_LIST_NUMBER",1),this.$store.dispatch("product/getList",this.newParams),this.$myLoading.myLoading.closeLoading()},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},handlePage:function(t){if(this.listNumber+t<=0||this.listNumber+t>Math.ceil(this.pageCount/this.params.limit))return!1;this.$myLoading.myLoading.loading(),this.$store.commit("product/SET_LIST_NUMBER",this.listNumber+t),this.newParams.offset=(this.listNumber-1)*this.newParams.limit,this.$store.dispatch("product/getList",this.newParams),this.$myLoading.myLoading.closeLoading()},handleSort:function(t,e,a){var i=0;if(i="top"===a?t-1:t+1,-1===i||i===this.listData.length)return!1;this.$store.commit("product/SWAP_LIST_DATA",{index:t,actionIndex:i}),this.$store.dispatch("product/swapData",{a_id:this.listData[i].id,b_id:this.listData[t].id})},handleSelectionChange:function(t){this.multipleSelection=t},handleDelete:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=[],a=this.multipleSelection,i=0;i<a.length;i++)e.push(a[i].id);return r={isTrash:!0,idList:e},t.next=6,Object(c["n"])(r);case 6:t.sent,Object(o["Message"])({message:"放入回收站成功！",type:"success",duration:1e3}),this.load();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleChange:function(t,e){},handleRow:function(t){var e=this;this.listData.forEach((function(a,i){if(a.id==t.id)return e.listData[i]["isShow"]=!0,void(a.NewCommissionRate==a.commissionRate&&(e.listData[i]["isShow"]=!1))})),console.log(this.listData[0])},handleUpdate:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["r"])({productId:e.id,rate:parseInt(e.commissionRate)});case 2:a=t.sent,0===a.status&&(Object(o["Message"])({message:"更新成功！",type:"success",duration:1e3}),this.load());case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleEdit:function(t,e){this.$router.push({name:"UpdateProduct",params:{id:e.id}})},handleView:function(t,e){window.open("/product/detail?productId="+e.id,"_blank")},handleCreate:function(){this.$router.push({name:"CreateProduct"})},changeRecommend:function(t,e){this.$store.dispatch("product/changeRecommend",{id:e.id,recommend:e.isRecommend})},changeIsHot:function(t,e){this.$store.dispatch("product/changeIsHot",{id:e.id,isHot:e.isHot})},changeIsNew:function(t,e){this.$store.dispatch("product/changeIsNew",{id:e.id,isNew:e.isNew})},changeIsSelling:function(t,e){this.$store.dispatch("product/changeIsSelling",{id:e.id,isSelling:e.isSelling})},thirdParty:function(){this.thirdPartyDialog=!0},saveThirdParty:function(){var t=this;this.$refs.thirdPartyRef.validate((function(e){e&&(t.thirdPartyDialog=!1,setTimeout((function(){t.$store.dispatch("product/createFromOther",t.thirdPartyParam).then((function(){var e=t.$store.state.product.createFromOtherStatus;if(null!=e&&0===e){t.$message({type:"success",message:"操作成功"});var a=t.$store.state.product.createFromResult;null!=a&&t.$router.push({name:"UpdateProduct",params:{id:a.id}})}else t.$message({type:"error",message:"操作失败"})}))}),100))}))},resetForm:function(t){null!=this.$refs[t]&&this.$refs[t].resetFields()}}},d=u,p=(a("4464"),a("2877")),h=Object(p["a"])(d,i,r,!1,null,"522750be",null);e["default"]=h.exports}}]);