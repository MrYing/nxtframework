(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52375a2c"],{"6e6f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("创建")])],1),e._v(" "),a("el-card",{staticStyle:{"margin-top":"10px"}},[a("el-table",{ref:"multipleTable",attrs:{data:e.listData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"brandName",label:"品牌名称",height:"30px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"品牌图片","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"brandImg",attrs:{src:e.row.picUrlPathWithDomain}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作","show-overflow-tooltip":"","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editorClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"品牌管理",visible:e.saveDialog,"close-on-click-modal":!1,"show-close":!1,"close-on-press-escape":!1,width:"500px",center:""},on:{"update:visible":function(t){e.saveDialog=t}}},[a("el-form",{ref:"brandParamRef",attrs:{model:e.brandParam,rules:e.brandParamRules}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"brandName","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{float:"left",width:"335px"},attrs:{autocomplete:"off",maxlength:"50"},model:{value:e.brandParam.brandName,callback:function(t){e.$set(e.brandParam,"brandName",t)},expression:"brandParam.brandName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌图片",prop:"uploadfileId","label-width":e.formLabelWidth}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.brandParam.uploadfileId,callback:function(t){e.$set(e.brandParam,"uploadfileId",t)},expression:"brandParam.uploadfileId"}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{width:"300px",hight:"50px"},attrs:{action:"/api/admin/upload/public_pic",headers:e.headers,"on-success":e.UploadOnSuccess,"before-upload":e.beforeAvatarUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"list-type":"picture",limit:1}},[a("el-button",{attrs:{type:"primary"}},[e._v("选 择")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveConfirm}},[e._v("确 定")])],1)],1)],1)},i=[],n=a("5f87"),l={data:function(){var e=function(e,t,a){null==t||0===t.length?a(new Error("品牌名称不能为空")):a()},t=function(e,t,a){null==t||0===t.length?a(new Error("品牌图片不能为空")):a()};return{multipleSelection:[],brandParam:{},saveDialog:!1,formLabelWidth:"120px",headers:{token:Object(n["a"])(),user_id:Object(n["b"])()},listData:[],brandParamRules:{brandName:[{required:!0,trigger:"blur",validator:e}],uploadfileId:[{required:!0,trigger:"change",validator:t}]},fileList:[]}},computed:{},created:function(){this.load()},mounted:function(){},methods:{load:function(){var e=this;this.$store.dispatch("brand/getBrandList").then((function(){e.listData=[],e.listData=e.$store.state.brand.brandList}))},handleSelectionChange:function(e){this.multipleSelection=e},handleCreate:function(){this.brandParam={},this.resetForm("brandParamRef"),this.saveDialog=!0},handleRemove:function(e,t){this.brandParam.uploadfileId=null},handlePreview:function(e){},UploadOnSuccess:function(e,t,a){this.$set(this.brandParam,"uploadfileId",e.id),this.$forceUpdate()},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type,a=e.size/1024/1024<20;return t||this.$message.error("上传图片只能是 JPG、PNG、GIF 格式之一!"),a||this.$message.error("上传图片大小不能超过 20MB!"),t&&a},closeDialog:function(){this.saveDialog=!1,this.fileList=[]},saveConfirm:function(){var e=this;this.$refs.brandParamRef.validate((function(t){t&&e.saveChange()}))},saveChange:function(){var e=this;this.newParams=Object.assign({},this.brandParam),this.$store.dispatch("brand/saveBrand",this.newParams).then((function(){var t=e.$store.state.brand.brandSaveStatus;null!=t&&0===t?(e.$message({type:"success",message:"保存成功"}),e.closeDialog(),e.load()):e.$message({type:"error",message:"保存失败"})}))},editorClick:function(e){this.resetForm("brandParamRef"),this.saveDialog=!0,this.fileList=[{name:e.brandName,url:e.picUrlPathWithDomain}],this.brandParam={id:e.id,brandName:e.brandName,uploadfileId:e.uploadFileId}},deleteClick:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=Object.assign({},{id:e.id});t.$store.dispatch("brand/deleteBrand",a).then((function(){var e=t.$store.state.brand.brandDeleteStatus;null!=e&&0===e?(t.load(),t.$message({type:"success",message:"删除成功"})):t.$message({type:"error",message:"删除失败"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},resetForm:function(e){null!=this.$refs[e]&&this.$refs[e].resetFields()}}},s=l,o=(a("73c7"),a("2877")),d=Object(o["a"])(s,r,i,!1,null,null,null);t["default"]=d.exports},"731e":function(e,t,a){},"73c7":function(e,t,a){"use strict";a("731e")}}]);